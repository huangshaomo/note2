# 网络通信

## http协议

### 什么是服务器?

### 如何访问服务器

### http协议



服务器只看请求头和请求体

服务器：根据请求头和请求体，创建一个响应头和响应体，发送给客户端



永久：以前的地址被永久覆盖



### 冯诺依曼式计算机 ——冯诺依曼(计算机之父)

**运算器**：

​		CPU（整数运算），GPU(显卡)（浮点运算）

**存储器**：

​		内存（断电数据情况，读写速度快），相当于手机的运行内存

​		硬盘（辅存)：（数据可以持久化，读写速度相对较慢），相当于手机的存储内存

**控制器**：

​	 	主板上的一些器件

**输入设备**：

​		 鼠标，键盘，麦克风，**网口**（发送请求）

**输出设备**：

​		显示器、耳机、**网口**（接受响应）



### IP地址

不同局域网下的计算机之所以访问不到，是因为没有公网IP，通过公网IP的中转才能访问得到其他局域网下的计算机，就想微信发消息，必须先将消息发送到微信的服务器，再经由微信的服务器发送到其他的手机，如果没有微信作为媒介，消息是无法传递到其他手机的

### 经典面试题

1、**当向浏览器的地址栏中输入一个url按回车之后，网络中会发生什么**

比如输入的是123.xyz

首先解析DNS，解析DNS首先看

1、浏览器的缓存

2、本机host文件

3、家里路由器

4、上级路由、城市的LNDS服务器

...直到

gDNS服务器

一直向上查找直到找到为止，再反回去，在返回去的过程中，可能被其他路由器缓存下来



2、**Get和Post请求方式的区别**

1. 是基于什么前提的？如果什么前提都没有，不是用任何规范，只考虑语法和理论上的HTTP协议

2. 如果是基于RFC规范的：

   1. 理论上的（Specification）: GET和POST具有相同语法的，但是有不同的语义。get是用来获取数据的，POST是用来发送数据的，其他方面没有区别

   2. 基于实际的（impelemention）：各种浏览器，就是这个规范的实现者

      常见的哪些不同：

      1）GET的数据在URl是可见的，POST请求不显示在URL中

      2）GET请求对长度有限制的，POST是无限制的

      3）GET请求的数据可以收藏为书签，POST请求到的数据不可收藏为书签

      4）GET请求后，按后退按钮，刷新按钮无影响，POST数据会被重新提交

      5）GET编码类型：application/x-www-form-url，POST的编码类型：encodeapplication/x-www-form-urlencoded，multipart/form-data

      6）GET历史参数会被保留在浏览器，POST不会保存在浏览器中

      7）GET只运行ASCII编码、POST没有编码显示，甚至允许发二进制的（媒体、音频）。

      8）GET与POST相比，GET安全性较差、因为所发的数据是URL的一部分。



### 五层网络模型

应用层

运输层：TCP协议、UDP协议()

网络层

数据链路层

物理层：物理传输介质，光纤、铜啥的，不同的传输介质，数据传输的频率不同 



HTTP协议分为两个部分

![image-20200511181319348](D:/Typora/typora-user-images/网络/image-20200511181319348.png)

以上所有的描述，本质上都是带有描述的字符串





### 应用层之HTTP协议

> http://www.baidu.com/path?a=1&b=2#hash

**请求：Request**

> 请求头、数据体



请求方式   路径   协议版本 

HOST

connection

User-Agent

... 

**响应：Response**

> 响应头，数据体

协议版本	状态码	状态码描述

Cache-Control:max-age-86400  结果缓存一天，相同请求结果直接从 缓存里拿

属性：值



**Cookie和Session**

Cookie:

1. 初始状态：没有登录
2. 访问百度的登录页，输入用户名，密码
3. 如果用户名密码正确，百度的后端会向这个域名下，设置一个Cookie,写入用户的基本信息（加密的）
4. 以后每一个向百度发送请求，浏览器都会自动带上这些Cookie
5. 服务端（后端）看到里带有ID的Cookie，就可以解析这个加密的ID，来获取到这个用户本身的ID
6. 如果服务器能获取到本身的ID，那么就证明这个用户已经登录过里，所以后端可以继续保留用户的信息

缺点：如果是个坏人，复制里我浏览器里的Cookie，它就可以在它的电脑里登录我的账户

特点：Cookie可以长时间保存，关闭浏览器不会消失，可以跨页面，存在某个域名下



Session：

​	数据存储在服务器端口

缺点：如果用户量非常大，会和很消耗服务器资源，而且后端可能不止一台服务器，用户的登录信息，在哪个服务器登录的，就只存在于那台服务器上，需要通过反向代理（轮询，IP哈希），轮询是每次登录，都会向其中一台服务器发送登录请求，，IP哈希是只向一台服务器发送登录请求









XSS注入攻击：

用JS代码，拉取你的Cookies，用于伪造登录







服务器：

严格的说，服务器是一台服务器，这台计算机，只提供服务。（不是用户用的），但是，我们常说的这个服务器，指的是服务容器，而不是服务器

服务容器：是一个程序。程序可以监听一个端口，读取文件，并且返回。

如果外面想通过访问服务器（服务容器）的方式，来访问我们自己写的页面

我们就得装一个服务容器的程序

